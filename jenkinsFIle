flowchart LR

%% Pools
subgraph U[Pool: Usuario]
    U1([Start])
    U2[Enviar solicitud vía Teams]
    U3([End])
end

subgraph P[Pool: Plataforma IA & Operaciones]

    subgraph C[Lane: Chatbot / LLM]
        C1[Recibir mensaje]
        C2[Interpretar intención (LLMaaS)]
        G1{¿Requiere acción?}
        C3[Generar respuesta]
    end

    subgraph A[Lane: AIOps - Dynatrace]
        A1[Consultar métricas y eventos]
        A2[Detectar anomalías]
        A3[Root Cause Analysis]
    end

    subgraph I[Lane: ITSM & Gobierno]
        I1[Validar permisos\nMyAccess]
        I2[Registrar / Actualizar incidente\nServiceNow]
    end

    subgraph O[Lane: Orquestación]
        O1[Ejecutar pipeline\nJenkins]
        O2[Aplicar acción correctiva]
    end

    subgraph K[Lane: Conocimiento]
        K1[Consultar documentación\nSharePoint]
    end
end

%% Flow
U1 --> U2 --> C1
C1 --> C2 --> G1

G1 -- No --> K1 --> C3
G1 -- Sí --> A1 --> A2 --> A3 --> I1 --> I2 --> O1 --> O2 --> C3

C3 --> U3
